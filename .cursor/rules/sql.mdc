---
description: 
globs: 
alwaysApply: true
---
-- .mdc: Ziel = Supabase RPC-Funktion vollstÃ¤ndig und produktionsbereit erstellen
-- Vorgaben fÃ¼r Cursor:
-- 1. Die folgende PL/pgSQL-Funktion soll vollstÃ¤ndig implementiert werden â€“ **keine Platzhalter**, kein "Rest der Funktion"!
-- 2. Der Code soll produktionsbereit sein und direkt via `supabase db push` in Supabase funktionieren.
-- 3. Verwende `DROP FUNCTION IF EXISTS ...` mit exakter Signatur vor der Funktion, um doppelte EintrÃ¤ge zu vermeiden.
-- 4. Ersetze oder erweitere die Funktion **immer vollstÃ¤ndig** â€“ keine "todo" oder ausgelassenen BlÃ¶cke.
-- 5. RÃ¼ckgabewert ist ein vollstÃ¤ndiges `jsonb_build_object(...)` mit allen relevanten Keys (z.â€¯B. xp_awarded, coins_awarded, new_progress, streak, etc.).
-- 6. Verwende ausschlieÃŸlich reale Tabellen und Spalten aus dem aktuellen Supabase-Schema (kein Beispielcode).
-- 7. Die Funktion muss ausfÃ¼hrbar, testbar und logisch abgeschlossen sein â€“ keine LÃ¼cken.
-- 8. Ziel: Diese Datei soll beim Speichern direkt einsatzbereit sein, ohne dass manuell ergÃ¤nzt werden muss.

-- ğŸ’¡ Hinweis: Nach Speichern wird diese Datei mit `supabase db push` deployed â€“ stelle sicher, dass keine SQL-Fehler vorhanden sind.

-- âœ³ï¸ Beispielname: submit_answer.sql
-- âœ³ï¸ Speicherort: /supabase/functions/
